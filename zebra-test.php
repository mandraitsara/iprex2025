<?php/**------------------------------------------------------------------------PAGE - TEST ZEBRACopyright (C) 2018 Intersedhttp://www.intersed.fr/------------------------------------------------------------------------@author    Cédric Bouillon@copyright Copyright (c) 2018 Intersed@version   1.0@since     2018------------------------------------------------------------------------ */require_once 'scripts/php/config.php';$h1     = "Test d'impression ZEBRA";$h1fa   = 'fa-fw fa-print';include('includes/header.php');// Formulaire soumiif (isset($_REQUEST['hote'])) { ?>    <div class="container-fluid page-admin">        <div class="row justify-content-md-center">             <div class="col-6 pt-5">    <?php	$host = $_REQUEST['hote'] ? trim($_REQUEST['hote']) : '';    $port = $_REQUEST['port'] ? trim($_REQUEST['port']) : '';    // Pas de port ou d'hote ?    if ($host == '' || $port == '') { ?>        <div class="alert alert-danger text-center text-30">            <i class="fa fa-exclamation-circle"></i>            <p>Hôte ou port incomplet !</p>        </div>    <?php    // OK a des données de connexion    } else {        // ----------------- DEBUT DU CODE REFERENT ---------------------		/* construct the label */		$label = "^XA ^LH0,0 ^FO4,2 ^GB804,798,4 ^FS ^FO4,2 ^GB548,52,4 ^FS ^FO19,12 ^ADN,36,20 ^FDRossiAndrea ^FS ^FO548,2 ^GB260,52,4 ^FS ^FO561,16 ^ADN,36,10 ^FDP/V ^FS ^FO611,16^ADN,36,10 ^FD1:3 ^FS ^FO693,16 ^ADN,36,10 ^FD18/12/14 ^FS ^FO20,66 ^GB540,135,80 ^FS^FO21,70 ^ADN,135,25 ^FR ^FDREGGIO CALABRIA ^FS ^FO720,66 ^GB72,135,80 ^FS ^FO721,70^ADN,135,25 ^FR ^FD13 ^FS ^FO4,210 ^GB128,166,4 ^FS ^FO128,210 ^GB680,166,4 ^FS^FO136,220 ^ADN,36,15 ^FDProva Rossi ^FS ^FO136,276 ^ADN,36,10 ^FDCONTRADA RAVAGNESEGRAZIELLA,8 ^FS ^FO15,243 ^ADN,108,50 ^FDE5 ^FS ^FO136,338 ^ADN,36,14 ^FDReggioCalabria ^FS ^FO580,338 ^ADN,36,15 ^FDRC ^FS ^FO632,210 ^GB176,166,4 ^FS ^FO660,220^AAN,18,5 ^FDCALABRIA SICILIA ^FS ^FO695,246 ^ADN,18,5 ^FDCSN ^FS ^FO632, 273^GB176,103,4 ^FS ^FO640,280 ^ADN,18,5 ^FDPeso Kg ^FS ^FO680,318 ^ADN,36,20 ^FD4.1 ^FS^FO632, 372 ^GB176,48,4 ^FS ^FO640,378 ^ADN,18,5 ^FDPorto: ^FS ^FO658,398 ^ADN,18,10^FDFRANCO ^FS ^FO4,372 ^GB804,48,4 ^FS ^FO25,383 ^ADN,36,10 ^FDNote: ^FS ^FO88,383^ADN,36,10 ^FDProva Zaffignani ^FS ^FO640,650 ^XGE:GLSMINI.GRF,1,1 ^FS ^FO606,718^GB202,82,4 ^FS ^FO4,718 ^GB606,82,4 ^FS ^FO240,718 ^GB144,80,40 ^FS ^FO242,724^ADN,96,25 ^FR ^FD1-25 ^FS ^FO50,422 ^BY3 ^BCN,260,N,N,N,A ^FVWW540006975010RC ^FS^FO50,685 ^ADN,27,15 ^FDWW 540006975 01 0 RC 01 ^FS ^XZ";		$socket = socket_create(AF_INET, SOCK_STREAM, SOL_TCP);		if ($socket === false) {			echo "socket_create() failed: reason: " . socket_strerror(socket_last_error()) . "\n";		} else {			echo "OK.\n";		}		echo "Attempting to connect to '$host' on port '$port'...";		$result = socket_connect($socket, $host, $port);		if ($result === false) {			echo "socket_connect() failed.\nReason: ($result) " . socket_strerror(socket_last_error($socket)) . "\n";		} else {			echo "OK.\n";		}		socket_write($socket, $label, strlen($label));		socket_close($socket);        // ----------------- FIN DU CODE REFERENT ---------------------    } // FIN test hote ou port non vides    ?>            </div>        </div>    </div>    <?php} // FIN formulaire soumi?><script type="text/javascript">    $(document).ready(function() {        $('#testzebra').submit(function() {            $('.btnTestZebra').attr('disabled', 'disabled');            $('.btnTestZebra').text('Communication...');        });    });</script><div class="container-fluid page-admin">      <form class="row justify-content-md-center" id="testzebra" action="<?php echo $_SERVER['PHP_SELF']; ?>" method="post">        <div class="col-6 pt-5">            <div class="alert alert-secondary row">                <div class="col-6">                    <div class="input-group mb-3 mt-3">                        <div class="input-group-prepend">                            <span class="input-group-text">Host</span>                        </div>                        <input type="text" class="form-control" placeholder="Ex : 172.17.144.89" name="hote" value="<?php echo isset($_REQUEST['hote']) ? $_REQUEST['hote'] : ''; ?>">                    </div>                </div>                <div class="col-3">                    <div class="input-group mb-3 mt-3">                        <div class="input-group-prepend">                            <span class="input-group-text">Port</span>                        </div>                        <input type="text" class="form-control" placeholder="Ex : 9100" name="port" value="<?php echo isset($_REQUEST['port']) ? $_REQUEST['port'] : ''; ?>">                    </div>                </div>                <div class="col-3">                    <button type="submit" class="btn btn-large btn-info form-control btnTestZebra mb-3 mt-3">Imprimer !</button>                </div>            </div>        </div>    </form></div><?phpinclude('includes/footer.php');