<?php/**------------------------------------------------------------------------PAGE - ADMIN - Gescom - AllCopyright (C) 2021 Koesiohttps://www.koesio.com/------------------------------------------------------------------------@author    Cédric Bouillon@copyright Copyright (c) 2021 Koesio@version   1.0@since     2021------------------------------------------------------------------------ */require_once 'scripts/php/config.php';require_once 'scripts/php/check_admin.php';$h1     = 'Documents commerciaux';$h1fa   = 'fa-fw fa-file-invoice';$tiersManager = new TiersManager($cnx);$id_clt = isset($_REQUEST['idclt']) ? intval(base64_decode($_REQUEST['idclt'])) : 0;$client = $tiersManager->getTiers($id_clt);if (!$client instanceof Tiers) { $client = new Tiers([]); }include('includes/header.php');?><div class="container-fluid page-admin">    <form class="row mb-3" id="filtres">        <input type="hidden" name="mode" value="getListeAll"/>        <input type="hidden" name="page" value="1"/>        <div class="col-10">            <div class="row">                <div class="col-3">                    <div class="input-group">                        <div class="input-group-prepend">                            <span class="input-group-text">Du</span>                        </div>                        <input type="text" class="form-control datepicker border-right-0" placeholder="Date" name="date_du" value="<?php						$dt = new DateTime(date('Y-m-d'));						$dt->modify('-10 day');                        if ($dt->format('Y-m-d') < '2021-11-01') {							$dt = new DateTime(date('2021-11-01'));                        }						echo $dt->format('d/m/Y');						?>">                        <div class="input-group-prepend">                            <span class="input-group-text">au</span>                        </div>                        <input type="text" class="form-control datepicker" placeholder="Date" name="date_au" value="">                    </div>                </div>                <div class="col">                    <input type="text" class="form-control" placeholder="N° BL/Facture" name="numblorfact" value="">                </div>                <div class="col">                    <div class="input-group">                        <div class="input-group-prepend">                            <span class="input-group-text"><i class="fa fa-address-card gris-9"></i></span>                        </div>                        <select class="selectpicker form-control show-tick" name="id_client[]" title="Client" data-live-search="true" multiple   data-selected-text-format = "count > 1" data-live-search-placeholder="Rechercher">                            <option value="0">Tous</option>                            <option data-divider="true"></option>							<?php							$tiersManager = new TiersManager($cnx);							$listeClients = $tiersManager->getListeClients([]);							if (is_array($listeClients)) {								foreach ($listeClients as $clt) { ?>                                    <option value="<?php echo $clt->getId(); ?>" <?php                                    echo $client->getId() == $clt->getId() ? 'selected' : '';                                    ?>><?php echo $clt->getNom(); ?></option>								<?php }							}							?>                        </select>                    </div>                </div>                <div class="col-2">                    <select class="selectpicker form-control show-tick" name="status" >                        <option value="-1" selected title="Statut">Tous</option>                        <option data-divider="true"></option>                        <option value="1">Facturés, réglés</option>                        <option value="0">Non facturés ou réglés</option>                    </select>                </div>                <div class="col-2">                    <select class="selectpicker form-control show-tick" name="envoi" >                        <option value="-1" selected title="Envois">Tous</option>                        <option value="1">Envoyés</option>                        <option value="0">Non envoyés</option>                    </select>                </div>            </div>        </div>        <div class="col-2 boutons-droite text-right">            <div class="row">                <div class="col-8">                    <button type="button" class="btn btn-info form-control btnRecherche"><i class="fa fa-search mr-1 fa-fw"></i> Rechercher&hellip;</button>                </div>                <div class="col-4">                    <a href="gc-all.php" class="btn btn-secondary form-control"><i class="fa fa-backspace mr-1 fa-fw"></i></a>                </div>            </div>        </div>    </form>    <div class="row">        <div class="col-12 col-xl-10" id="listeAll"></div>        <div class="col-12 col-xl-2 text-right boutons-droite">            <div class="alert alert-secondary">                <button type="button" class="btn btn-info form-control text-left pl-3 btnEnvoyerSelection"><i class="fa fa-paper-plane fa-fw fa-lg mr-2"></i> Envoyer sélection&hellip;</button>                <a href="gc-bls.php" class="mt-3 btn btn-dark form-control text-left pl-3"><i class="fa fa-file-invoice fa-fw fa-lg mr-2"></i>Liste des BL&hellip;</a>                <a href="gc-factures.php" class="mt-2 btn btn-dark form-control text-left pl-3"><i class="fa fa-file-invoice-dollar fa-fw fa-lg mr-2"></i>Liste des factures&hellip;</a>            </div>        </div>    </div></div><?phpinclude('includes/modales/modal_envoi_mail.php');include('includes/footer.php');