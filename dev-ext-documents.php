<?php/**------------------------------------------------------------------------PAGE - DEV - Extentions des documentsCopyright (C) 2019 Intersedhttp://www.intersed.fr/------------------------------------------------------------------------@author    Cédric Bouillon@copyright Copyright (c) 2019 Intersed@version   1.0@since     2018------------------------------------------------------------------------ */require_once 'scripts/php/config.php';// Vérifie une authentification par login/mdp adminrequire_once 'scripts/php/check_admin.php';// On restreint la page aux Administrateurs Devéloppeursif (!$utilisateur->isDev()) {  header('Location: index.php'); }$h1     = 'Gestion des formats de fichiers autorisés';$h1fa   = 'fa-fw fa-file-excel';// Formulaire soumi : mise à jour des extentions aurtorisésif (isset($_REQUEST['extdocs'])) {	$extdocs = isset($_REQUEST['extdocs']) ? trim(strtolower($_REQUEST['extdocs'])) : '';	$extdocs = str_replace(' ', '', $extdocs);	$config_extdocs  = $configManager->getConfig('extdocs');	if (!$config_extdocs || $config_extdocs->getValeur() != $extdocs) {		// Si pas configuré encore...		if (!$config_extdocs instanceof Config) {			$config_extdocs = new Config([]);			$config_extdocs->setClef('extdocs');			$config_extdocs->setDescription("Extensions de fichiers autorisés pour les documents");		} // Fin première configuration		$config_extdocs->setValeur($extdocs);		$config_extdocs->setDate_maj(date('Y-m-d H:i:s'));		$maj = $configManager->saveConfig($config_extdocs);	}} // FIN test formulaire soumisinclude('includes/header.php');// Retour visuel de la mise à jourif (isset($maj) && $maj == true) { ?>    <div class="alert alert-success" style="margin-top:-8px;">        <i class="fa fa-check-circle mr-1"></i>Informations mises à jour.    </div><?php} else if (isset($maj) && $maj == false) { ?>    <div class="alert alert-danger" style="margin-top:-8px;">        <i class="fa fa-exclamation-circle mr-1"></i>Une erreur est survenue, mise à jour des données impossibles !    </div>	<?php} // FIN test retour sur MAJ?><div class="container-fluid">    <div class="row justify-content-md-center padding-top-25">        <div class="col-md-6 alert alert-secondary">            <form action="<?php echo $_SERVER['PHP_SELF']; ?>" method="post">                <div class="form-group row">                    <div class="col-5 padding-top-10">                       Extensions de fichiers acceptés pour les documents :                        <p class="small gris-7">Séparés par des virgues (,)</p>                    </div>                    <div class="col-7">                        <div class="input-group input-group-lg">                            <div class="input-group-prepend">                                <span class="input-group-text"><i class="fa fa-handshake fa-lg"></i></span>                            </div>                            <input type="text" class="form-control" placeholder="Aucune !" name="extdocs" value="<?php                            $extdocs_obj = $configManager->getConfig('extdocs');                            echo $extdocs_obj instanceof Config ? $extdocs_obj->getValeur() : '';                            ?>"/>                        </div>                    </div>                </div>                <div class="form-group row justify-content-md-center mt-4">                    <button type="submit" class="btn btn-success"><i class="fa fa-check mr-1"></i> Enregistrer </button>                </div>            </form>        </div>    </div></div><?phpinclude('includes/footer.php');