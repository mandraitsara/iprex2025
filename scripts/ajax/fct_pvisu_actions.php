<?php/*   _|_|_|  _|_|_|    _| _|        _|    _|  _|        CBO FrameWork _|        _|_|_|    _|        (c) 2018 Cédric Bouillon _|        _|    _|  _|   _|_|_|  _|_|_|    _|_|_|_|--------------------------------------------------------Contrôleur Ajax Actions correctives------------------------------------------------------*/// Initialisation du mode d'appel$mode       = isset($_REQUEST['mode']) ? $_REQUEST['mode'] : '';// Intégration de la configuration du FrameWork et des autorisationsrequire_once '../php/config.php';// Instanciation des Managers$pvisuActionsManager = new PvisuActionsManager($cnx);$logManager = new LogManager($cnx);$fonctionNom = 'mode'.ucfirst($mode);if (function_exists($fonctionNom)) {	$fonctionNom();}/* ------------------------------------MODE - Change activation------------------------------------*/function modeChangeActivation() {	global $pvisuActionsManager, $logManager;	$id_pvisu_action = isset($_REQUEST['id']) ? intval($_REQUEST['id']) : 0;	if ($id_pvisu_action == 0) { exit('-1'); }	$pvisuAction = $pvisuActionsManager->getPvisuAction($id_pvisu_action);	if (!$pvisuAction instanceof PvisuAction) { exit('-2'); }	$actif = isset($_REQUEST['actif']) ? intval($_REQUEST['actif']) : -1;	if ($actif < 0) { $actif = $id_pvisu_action->getActivation() == 1 ? 0 : 1; }	$id_pvisu_action->setActivation($actif);	if (!$pvisuActionsManager->savePvisuActions($id_pvisu_action)) { exit('-3'); }	$logTexte = $actif == 1 ? 'Activation' : 'Désactivation';	$logTexte.= ' de l\'action corrective pVisuAction ID #'.$id_pvisu_action;	$log = new Log([]);	$log->setLog_type('info');	$log->setLog_texte($logTexte);	$logManager->saveLog($log);	exit('1');} // FIN mode