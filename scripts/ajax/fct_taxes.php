<?php/*   _|_|_|  _|_|_|    _| _|        _|    _|  _|        CBO FrameWork _|        _|_|_|    _|        (c) 2018 Cédric Bouillon _|        _|    _|  _|   _|_|_|  _|_|_|    _|_|_|_|--------------------------------------------------------Contrôleur Ajax Taxes------------------------------------------------------*/// Initialisation du mode d'appel$mode       = isset($_REQUEST['mode']) ? $_REQUEST['mode'] : '';// Intégration de la configuration du FrameWork et des autorisationsrequire_once '../php/config.php';// Instanciation des Managers$taxesManager = new TaxesManager($cnx);$logManager = new LogManager($cnx);$fonctionNom = 'mode'.ucfirst($mode);if (function_exists($fonctionNom)) {	$fonctionNom();}/* ------------------------------------MODE - Change activation------------------------------------*/function modeChangeActivation() {	global $taxesManager, $logManager;	$id_taxe = isset($_REQUEST['id']) ? intval($_REQUEST['id']) : 0;	if ($id_taxe == 0) { exit('-1'); }	$taxe = $taxesManager->getTaxe($id_taxe);	if (!$taxe instanceof Taxe) { exit('-2'); }	$actif = isset($_REQUEST['actif']) ? intval($_REQUEST['actif']) : -1;	if ($actif < 0) { $actif = $taxe->getActivation() == 1 ? 0 : 1; }	$taxe->setActivation($actif);	if (!$taxesManager->saveTaxe($taxe)) { exit('-3'); }	$logTexte = $actif == 1 ? 'Activation' : 'Désactivation';	$logTexte.= ' de la taxe ID #'.$id_taxe;	$log = new Log([]);	$log->setLog_type('info');	$log->setLog_texte($logTexte);	$logManager->saveLog($log);	exit('1');} // FIN mode