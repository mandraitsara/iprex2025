<?php/*   _|_|_|  _|_|_|    _| _|        _|    _|  _|        CBO FrameWork _|        _|_|_|    _|        (c) 2018 Cédric Bouillon _|        _|    _|  _|   _|_|_|  _|_|_|    _|_|_|_|--------------------------------------------------------Contrôleur Ajax LOTS------------------------------------------------------*/// Initialisation du mode d'appel$mode       = isset($_REQUEST['mode']) ? $_REQUEST['mode'] : '';// Intégration de la configuration du FrameWork et des autorisationsrequire_once '../php/config.php';// Instanciation des Managers$vuesManager = new VueManager($cnx);$fonctionNom = 'mode'.ucfirst($mode);if (function_exists($fonctionNom)) {	$fonctionNom();}/* ------------------------------------------MODE - Change le mode maintenance d'une vue-------------------------------------------*/function modeMaintenanceVue() {	global $vuesManager;    $id_vue = isset($_REQUEST['id_vue']) ? intval($_REQUEST['id_vue']) : -1;    $valeur = isset($_REQUEST['valeur']) ? intval($_REQUEST['valeur']) : -1;    if ($id_vue == -1 || $valeur < 0 || $valeur > 1) { exit; };    $vue = $vuesManager->getVue($id_vue);    if (!$vue instanceof Vue) { exit; };    $vue->setMaintenance($valeur);    if ($vuesManager->saveVue($vue)) { echo '1'; }    exit;}  // FIN mode/* ------------------------------------------MODE - Change la liaison emballage d'une vue-------------------------------------------*/function modeEmballageVue() {	global	$vuesManager;	$id_vue = isset($_REQUEST['id_vue']) ? intval($_REQUEST['id_vue']) : -1;	$valeur = isset($_REQUEST['valeur']) ? intval($_REQUEST['valeur']) : -1;	if ($id_vue == -1 || $valeur < 0 || $valeur > 1) { exit; };	$vue = $vuesManager->getVue($id_vue);	if (!$vue instanceof Vue) { exit; };	$vue->setEmballage($valeur);	if ($vuesManager->saveVue($vue)) { echo '1'; }	exit;}  // FIN modefunction modeConsoleDev() {	$vue 		= isset($_REQUEST['vue']) 		? trim(strtolower($_REQUEST['vue'])) : '';	$etape 		= isset($_REQUEST['etape']) 	? $_REQUEST['etape']  				 : -1;	$id 		= isset($_REQUEST['id']) 		? intval($_REQUEST['id']) 			 : 0;	$id_froid 	= isset($_REQUEST['id_froid']) 	? intval($_REQUEST['id_froid']) 	 : 0;	if ($etape == 0) { unset($_SESSION['infodevvue']); }	$infoDev = isset($_SESSION['infodevvue']) ? $_SESSION['infodevvue'] : '';	if ($vue == '') { echo '<i class="fa fa-exclamation-triangle text-danger"></i> Vue indéterminée !';exit;}	echo '<i class="fa fa-desktop text-info"></i> Vue ' . strtoupper($vue);	echo (int)$etape >= 0 ? '<i class="fa fa-code-branch text-info margin-left-15"></i> Etape ['.$etape.']' : '';	echo (int)$id > 0 ? '<i class="fa fa-hashtag text-warning margin-left-15"></i> Identifiant ['.$id.']' : '';	echo (int)$id_froid > 0 ? '<i class="fa fa-hashtag text-warning margin-left-15"></i> ID Froid ['.$id_froid.']' : '';	echo $infoDev != '' ? '<br>'.$infoDev : '';	exit;} // FIN mode